<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Do You Love Me?</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin-top: 200px;
    background-color: #fef5fb;
  }

  h1 {
    font-size: 100px;
    color: #FF80D2;
    margin-bottom: 50px;
  }

  button {
    padding: 40px 50px;
    font-size: 100px;
    margin: 10px;
    cursor: pointer;
    border: none;
    border-radius: 8px;
  }

  #btnYes {
    background-color: #4CAF50;
    color: white;
  }

  #btnNo {
    background-color: #FF4081;
    color: white;
  }

  #btnWatch {
    background-color: #7A7AFF;
    color: white;
  }

  #image {
    margin-top: 50px;
    width: 500px;
    border-radius: 10px;
  }

  #myVideo {
    margin-top: 50px;
    width: 800px;
    height: 450px;
    border-radius: 10px;
  }

  .d-none {
    display: none;
  }
</style>
</head>
<body>
  <div>
    <h1 id="message">Do you love me ?</h1>
    <img id="image" src="https://media.tenor.com/83VSASMnBJQAAAAj/bubu-dudu-sseeyall.gif" alt="dudu gif">
  </div>

  <!-- Buttons -->
  <button id="btnYes">Yes</button>
  <button id="btnNo">No</button>
  <button id="btnWatch" class="d-none">Video for you 💋</button>

  <!-- YouTube iframe -->
  <div id="videoContainer" class="d-none">
    <div id="myVideo"></div>
  </div>

<script>
let player; // YouTube player instance

// โหลด YouTube API
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// ฟังก์ชันนี้จะถูกเรียกโดย YouTube API หลังโหลดเสร็จ
function onYouTubeIframeAPIReady() {
  player = new YT.Player('myVideo', {
    height: '450',
    width: '800',
    videoId: 'M1bi6upipaw', // ใส่ YouTube ID ที่ต้องการ
    playerVars: {
      autoplay: 0, // เราจะสั่งเล่นเองตอนคลิก
      controls: 1
    },
    events: {
      'onStateChange': onPlayerStateChange
    }
  });
}

// ตรวจจับสถานะของวิดีโอ
function onPlayerStateChange(event) {
  if (event.data === YT.PlayerState.ENDED) {
    // วิดีโอเล่นจบ
    $("#videoContainer").addClass("d-none");
    $("#message").removeClass("d-none").html("พี่รักนู๋นะครับ ❤");
    $("#image").attr("src", "https://media.tenor.com/gUiu1zyxfzYAAAAi/bear-kiss-bear-kisses.gif");
  }
}

$(document).ready(function() {
  let count = 0;

  // ปุ่ม No
  $("#btnNo").click(function() {
    $("#image").removeClass("d-none");
    if(count === 0){
      $("#image").attr("src", "https://media.tenor.com/5IRHkK2k-E8AAAAi/dudu.gif");
    } else if(count === 1){
      $("#image").attr("src", "https://media.tenor.com/TwgOtLeidQsAAAAi/dudu-cheeky-dudu-walking.gif");
    } else if(count === 2){
      $("#image").attr("src", "https://media.tenor.com/Q9VuGIKQqEMAAAAi/love-bear.gif");
    } else if(count === 3){
      $("#image").attr("src", "https://media.tenor.com/0XxZLMzjYV0AAAAi/dudu-crying-texting.gif");
    } else if(count >= 4){
      $("#image").attr("src", "https://media.tenor.com/TBqHlfNB19gAAAAi/dudu-mad-dudu-angry.gif");
      $(this).hide();
      $("#btnYes").css({"width":"90%","height":"100%"});
    }
    count++;
  });

  // ปุ่ม Yes
  $("#btnYes").click(function() {
    $(this).hide();
    $("#btnNo").hide();
    setTimeout(() => { $("#btnWatch").removeClass("d-none"); }, 2000);

    $("#message").html("I Love You ❤");
    $("#image").attr("src", "https://media.tenor.com/LJcUNGpO9s0AAAAj/dudu-flowers-rose-dudu.gif");
  });

  // ปุ่ม Watch (เปิดวิดีโอ YouTube)
  $("#btnWatch").click(function(){
    $("#message").addClass("d-none");
    $(this).hide();
    $("#image").attr("src", "https://media.tenor.com/l2YDCpF8cGAAAAAi/dudu-bubu-dudu-bubu-popcorn.gif");

    // แสดงวิดีโอ
    setTimeout(() => {
      $("#videoContainer").removeClass("d-none");
      player.playVideo(); // สั่งให้เล่นจริง ๆ ผ่าน API
    }, 2000);
  });
});
</script>

</body>
</html>
